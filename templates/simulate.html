{% extends "base.html" %} {% block title %}Apply for Loan - LoanLess{% endblock
%} {% block content %}

<!-- Page Header -->
<section
    class="bg-gradient-to-br from-primary to-primary-dark text-white py-20"
>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
            <h1 class="text-5xl lg:text-6xl font-bold mb-4">
                Apply for Your Loan
            </h1>
            <p class="text-xl opacity-90 font-light">
                Simple, fast, and transparent
            </p>
        </div>
    </div>
</section>

<!-- Progress Indicator -->
<section class="bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-center">
            <!-- Step 1 -->
            <div class="flex items-center">
                <div
                    id="step1-indicator"
                    class="w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg transition-all"
                >
                    1
                </div>
                <div class="ml-3 text-left">
                    <p
                        id="step1-label"
                        class="font-semibold text-primary transition-all"
                    >
                        Loan Details
                    </p>
                    <p class="text-xs text-gray-500">Amount & Duration</p>
                </div>
            </div>

            <!-- Connector -->
            <div class="w-24 h-1 bg-gray-300 mx-4"></div>

            <!-- Step 2 -->
            <div class="flex items-center">
                <div
                    id="step2-indicator"
                    class="w-12 h-12 rounded-full bg-gray-300 text-white flex items-center justify-center font-bold text-lg transition-all"
                >
                    2
                </div>
                <div class="ml-3 text-left">
                    <p
                        id="step2-label"
                        class="font-semibold text-gray-400 transition-all"
                    >
                        Financial Info
                    </p>
                    <p class="text-xs text-gray-500">Details & Documents</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Loan Application Form -->
<section class="py-20 bg-white min-h-screen">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <form
            method="POST"
            action="{{ url_for('simulate') }}"
            enctype="multipart/form-data"
            id="loanForm"
        >
            <!-- STEP 1: Basic Loan Information -->
            <div id="step1" class="space-y-12">
                <!-- Amount Input -->
                <div class="text-center">
                    <label
                        for="amount"
                        class="block text-lg font-medium text-gray-600 mb-4"
                        >Loan Amount</label
                    >
                    <div class="relative inline-block">
                        <span
                            class="absolute left-6 top-1/2 -translate-y-1/2 text-5xl font-light text-gray-400"
                            >$</span
                        >
                        <input
                            type="number"
                            id="amount"
                            name="amount"
                            min="500"
                            max="50000"
                            step="100"
                            value="5000"
                            required
                            class="w-80 pl-16 pr-8 py-6 text-6xl font-bold text-center border-b-4 border-gray-200 focus:border-primary outline-none transition-all bg-transparent"
                            oninput="calculatePayment()"
                        />
                    </div>
                    <p class="mt-4 text-sm text-gray-500">
                        Between $500 and $50,000
                    </p>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-100"></div>

                <!-- Sector Selection -->
                <div>
                    <label
                        class="block text-lg font-medium text-gray-600 mb-6 text-center"
                        >Working Sector</label
                    >
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Technology"
                                class="peer sr-only"
                                required
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-laptop-code text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Technology</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Healthcare"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-heartbeat text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Healthcare</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Education"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-graduation-cap text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Education</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Finance"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-chart-line text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Finance</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Manufacturing"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-industry text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">
                                    Manufacturing
                                </p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Retail"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-shopping-cart text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Retail</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Construction"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-hard-hat text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">
                                    Construction
                                </p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input
                                type="radio"
                                name="sector"
                                value="Other"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-briefcase text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Other</p>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-100"></div>

                <!-- Work Experience -->
                <div>
                    <label
                        class="block text-lg font-medium text-gray-600 mb-6 text-center"
                        >Years of Experience</label
                    >
                    <div class="grid grid-cols-5 gap-4 max-w-3xl mx-auto">
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="work_years"
                                value="1"
                                class="peer sr-only"
                                required
                            />
                            <div
                                class="p-4 border-2 border-gray-200 rounded-xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <p class="font-bold text-2xl">1</p>
                                <p class="text-xs mt-1">year</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="work_years"
                                value="2"
                                class="peer sr-only"
                            />
                            <div
                                class="p-4 border-2 border-gray-200 rounded-xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <p class="font-bold text-2xl">2</p>
                                <p class="text-xs mt-1">years</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="work_years"
                                value="3"
                                class="peer sr-only"
                            />
                            <div
                                class="p-4 border-2 border-gray-200 rounded-xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <p class="font-bold text-2xl">3</p>
                                <p class="text-xs mt-1">years</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="work_years"
                                value="4"
                                class="peer sr-only"
                            />
                            <div
                                class="p-4 border-2 border-gray-200 rounded-xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <p class="font-bold text-2xl">4</p>
                                <p class="text-xs mt-1">years</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="work_years"
                                value="5"
                                class="peer sr-only"
                            />
                            <div
                                class="p-4 border-2 border-gray-200 rounded-xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <p class="font-bold text-2xl">5+</p>
                                <p class="text-xs mt-1">years</p>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-100"></div>

                <!-- Loan Purpose -->
                <div>
                    <label
                        class="block text-lg font-medium text-gray-600 mb-6 text-center"
                        >Loan Purpose</label
                    >
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Personal"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-user text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Personal</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Business"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-business-time text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Business</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Education"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-book text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Education</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Home Improvement"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-home text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">
                                    Home Improvement
                                </p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Medical"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-medkit text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Medical</p>
                            </div>
                        </label>
                        <label class="relative cursor-pointer">
                            <input
                                type="radio"
                                name="purpose"
                                value="Other"
                                class="peer sr-only"
                            />
                            <div
                                class="p-6 border-2 border-gray-200 rounded-2xl text-center hover:border-primary transition-all peer-checked:border-primary peer-checked:bg-primary peer-checked:text-white"
                            >
                                <i
                                    class="fas fa-ellipsis-h text-3xl mb-2 block"
                                ></i>
                                <p class="font-semibold text-sm">Other</p>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-100"></div>

                <!-- Duration Input -->
                <div class="text-center">
                    <label
                        for="payment_period"
                        class="block text-lg font-medium text-gray-600 mb-4"
                        >Repayment Duration (months)</label
                    >
                    <div class="relative inline-block">
                        <input
                            type="number"
                            id="payment_period"
                            name="payment_period"
                            min="6"
                            max="60"
                            step="6"
                            value="12"
                            required
                            class="w-64 px-8 py-6 text-6xl font-bold text-center border-b-4 border-gray-200 focus:border-primary outline-none transition-all bg-transparent"
                            oninput="calculatePayment()"
                        />
                        <span
                            class="absolute right-8 top-1/2 -translate-y-1/2 text-2xl font-light text-gray-400"
                            >mo</span
                        >
                    </div>
                    <p class="mt-4 text-sm text-gray-500">
                        Between 6 and 60 months
                    </p>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-100"></div>

                <!-- Monthly Payment Display -->
                <div
                    class="text-center py-12 bg-gradient-to-br from-primary-lighter to-white rounded-3xl"
                >
                    <p class="text-sm font-medium text-gray-600 mb-2">
                        Monthly Payment
                    </p>
                    <p
                        class="text-7xl font-bold text-primary mb-6"
                        id="monthlyPayment"
                    >
                        $425
                    </p>
                    <div class="flex justify-center gap-12 text-sm">
                        <div>
                            <p class="text-gray-600">Total</p>
                            <p
                                class="font-bold text-gray-900 text-lg"
                                id="totalAmount"
                            >
                                $5,100
                            </p>
                        </div></div>
                        <div>
                            <p class="text-gray-600">Commission</p>
                            <p
                                class="font-bold text-gray-900 text-lg"
                                id="commission"
                            >
                                $100
                            </p>
                        </div>
                        <div>
                            <p class="text-gray-600">Interest</p>
                            <p class="font-bold text-primary text-lg">0%</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons for Step 1 -->
                <div class="flex gap-4 pt-8">
                    <a
                        href="{{ url_for('main') }}"
                        class="flex-1 py-4 bg-gray-200 text-gray-700 rounded-2xl font-bold text-lg hover:bg-gray-300 transition-all text-center"
                    >
                        Cancel
                    </a>
                    <button
                        type="button"
                        onclick="nextStep()"
                        class="flex-1 py-4 bg-primary text-white rounded-2xl font-bold text-lg hover:bg-primary-dark transition-all shadow-lg hover:shadow-xl"
                    >
                        Continue to Financial Info
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- STEP 2: Financial & Social Information + Documents -->
            <div id="step2" class="space-y-8 hidden">
                <!-- Header -->
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">
                        Financial & Personal Information
                    </h2>
                    <p class="text-gray-600">
                        Help us verify your financial situation
                    </p>
                </div>

                <!-- Employment Section -->
                <div class="bg-white p-8 rounded-xl border border-gray-border">
                    <h3 class="text-sm font-semibold text-primary uppercase tracking-wide mb-6">
                        Employment Details
                    </h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label
                                for="job_title"
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >Job Title</label
                            >
                            <input
                                type="text"
                                id="job_title"
                                name="job_title"
                                required
                                placeholder="Software Engineer"
                                class="w-full px-4 py-3 border border-gray-border rounded-xl focus:border-primary focus:ring-2 focus:ring-primary-lighter focus:outline-none transition-all bg-white"
                            />
                        </div>
                        <div>
                            <label
                                for="salary_range"
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >Monthly Salary</label
                            >
                            <select
                                id="salary_range"
                                name="salary_range"
                                required
                                class="w-full px-4 py-3 border border-gray-border rounded-xl focus:border-primary focus:ring-2 focus:ring-primary-lighter focus:outline-none transition-all appearance-none bg-white"
                            >
                                <option value="">Select range...</option>
                                <option value="0-1000">$0 - $1,000</option>
                                <option value="1000-2500">$1,000 - $2,500</option>
                                <option value="2500-5000">$2,500 - $5,000</option>
                                <option value="5000-10000">$5,000 - $10,000</option>
                                <option value="10000+">$10,000+</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Financial Questions -->
                <div class="bg-white p-8 rounded-xl border border-gray-border">
                    <h3 class="text-sm font-semibold text-primary uppercase tracking-wide mb-6">
                        Financial Situation
                    </h3>
                    <div class="space-y-8">
                        <!-- Other Debts -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3"
                                >Do you have other outstanding debts?</label
                            >
                            <div class="grid grid-cols-2 gap-4">
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="has_other_debts"
                                        value="false"
                                        class="peer sr-only"
                                        required
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-medium text-gray-900 peer-checked:text-primary">No</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="has_other_debts"
                                        value="true"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-medium text-gray-900 peer-checked:text-primary">Yes</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- House Ownership -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3"
                                >Do you own a house or property?</label
                            >
                            <div class="grid grid-cols-2 gap-4">
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="owns_house"
                                        value="true"
                                        class="peer sr-only"
                                        required
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-medium text-gray-900 peer-checked:text-primary">Yes, I own</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="owns_house"
                                        value="false"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-medium text-gray-900 peer-checked:text-primary">No, I rent</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Number of Children -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3"
                                >Number of Dependents</label
                            >
                            <div class="grid grid-cols-6 gap-3">
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="0"
                                        class="peer sr-only"
                                        required
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">0</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="1"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">1</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="2"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">2</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="3"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">3</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="4"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">4</p>
                                    </div>
                                </label>
                                <label class="cursor-pointer">
                                    <input
                                        type="radio"
                                        name="number_of_children"
                                        value="5"
                                        class="peer sr-only"
                                    />
                                    <div
                                        class="p-3 border border-gray-border rounded-xl text-center hover:border-primary-light transition-all peer-checked:border-primary peer-checked:bg-primary-lighter peer-checked:ring-2 peer-checked:ring-primary"
                                    >
                                        <p class="font-bold text-lg text-gray-900 peer-checked:text-primary">5+</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Documents -->
                <div class="bg-white p-8 rounded-xl border border-gray-border">
                    <h3 class="text-sm font-semibold text-primary uppercase tracking-wide mb-6">
                        Required Documents
                    </h3>
                    <div class="space-y-6">
                        <!-- ID Document -->
                        <div>
                            <label
                                for="id_document"
                                class="block text-sm font-medium text-gray-700 mb-3"
                            >
                                ID Document or Passport
                                <span class="text-accent">*</span>
                            </label>
                            <input
                                type="file"
                                id="id_document"
                                name="id_document"
                                accept=".pdf,.jpg,.jpeg,.png"
                                required
                                class="w-full px-4 py-3 border border-dashed border-gray-border rounded-xl focus:border-primary focus:outline-none transition-all file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary-dark cursor-pointer bg-gray-light"
                            />
                            <p class="mt-2 text-xs text-gray-500">
                                PDF, JPG, PNG (Max 5MB)
                            </p>
                        </div>

                        <!-- Payment Statements -->
                        <div>
                            <label
                                for="payment_statements"
                                class="block text-sm font-medium text-gray-700 mb-3"
                            >
                                Last 3 Months Salary Slips
                                <span class="text-accent">*</span>
                            </label>
                            <input
                                type="file"
                                id="payment_statements"
                                name="payment_statements"
                                accept=".pdf,.jpg,.jpeg,.png"
                                multiple
                                required
                                class="w-full px-4 py-3 border border-dashed border-gray-border rounded-xl focus:border-primary focus:outline-none transition-all file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary-dark cursor-pointer bg-gray-light"
                            />
                            <p class="mt-2 text-xs text-gray-500">
                                Multiple files accepted (Max 5MB each)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Privacy Note -->
                <div class="bg-primary-lighter border-l-4 border-primary p-5 rounded-xl">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-shield-alt text-primary text-lg"></i>
                        <p class="text-sm text-gray-700">
                            All information is encrypted and kept strictly confidential
                        </p>
                    </div>
                </div>

                <!-- Hidden Fields -->
                <input
                    type="hidden"
                    name="monthly_payment"
                    id="monthly_payment_hidden"
                    value="425.00"
                />
                <input type="hidden" name="action" value="subscribe" />

                <!-- Navigation Buttons for Step 2 -->
                <div class="flex flex-col sm:flex-row gap-4 pt-8">
                    <button
                        type="button"
                        onclick="previousStep()"
                        class="flex-1 py-4 bg-gray-200 text-gray-700 rounded-2xl font-bold text-lg hover:bg-gray-300 transition-all"
                    >
                        <i class="fas fa-arrow-left mr-2"></i>
                        Back to Loan Details
                    </button>
                    <button
                        type="submit"
                        class="flex-1 py-4 bg-primary text-white rounded-2xl font-bold text-lg hover:bg-primary-dark transition-all shadow-lg hover:shadow-xl"
                    >
                        <i class="fas fa-paper-plane mr-2"></i>
                        Submit Application
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

<script>
    // Calculate monthly payment
    function calculatePayment() {
        const amount = parseFloat(document.getElementById("amount").value) || 0;
        const period =
            parseInt(document.getElementById("payment_period").value) || 1;

        const totalAmount = amount + amount * 0.02;
        const monthlyPayment = totalAmount / period;
        const commission = amount * 0.02;

        document.getElementById("monthlyPayment").textContent =
            "$" + Math.round(monthlyPayment);
        document.getElementById("totalAmount").textContent =
            "$" + totalAmount.toLocaleString();
        document.getElementById("commission").textContent =
            "$" + commission.toLocaleString();
        document.getElementById("monthly_payment_hidden").value =
            monthlyPayment.toFixed(2);
    }

    // Multi-step form navigation
    function nextStep() {
        // Validate step 1 fields
        const form = document.getElementById("loanForm");
        const step1Inputs = document.querySelectorAll("#step1 input[required], #step1 select[required]");
        let isValid = true;

        step1Inputs.forEach(input => {
            if (!input.checkValidity()) {
                isValid = false;
                input.reportValidity();
            }
        });

        if (isValid) {
            // Hide step 1, show step 2
            document.getElementById("step1").classList.add("hidden");
            document.getElementById("step2").classList.remove("hidden");

            // Update progress indicators
            document.getElementById("step1-indicator").classList.remove("bg-primary");
            document.getElementById("step1-indicator").classList.add("bg-green-500");
            document.getElementById("step1-label").classList.remove("text-primary");
            document.getElementById("step1-label").classList.add("text-green-500");

            document.getElementById("step2-indicator").classList.remove("bg-gray-300");
            document.getElementById("step2-indicator").classList.add("bg-primary");
            document.getElementById("step2-label").classList.remove("text-gray-400");
            document.getElementById("step2-label").classList.add("text-primary");

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    function previousStep() {
        // Show step 1, hide step 2
        document.getElementById("step1").classList.remove("hidden");
        document.getElementById("step2").classList.add("hidden");

        // Update progress indicators
        document.getElementById("step1-indicator").classList.remove("bg-green-500");
        document.getElementById("step1-indicator").classList.add("bg-primary");
        document.getElementById("step1-label").classList.remove("text-green-500");
        document.getElementById("step1-label").classList.add("text-primary");

        document.getElementById("step2-indicator").classList.remove("bg-primary");
        document.getElementById("step2-indicator").classList.add("bg-gray-300");
        document.getElementById("step2-label").classList.remove("text-primary");
        document.getElementById("step2-label").classList.add("text-gray-400");

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        calculatePayment();
    });
</script>

{% endblock %}
